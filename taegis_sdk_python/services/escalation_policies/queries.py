"""EscalationPolicies Query."""

# pylint: disable=no-member, unused-argument, too-many-locals, duplicate-code, wildcard-import, unused-wildcard-import, cyclic-import


# Autogenerated
# DO NOT MODIFY

from __future__ import annotations

import logging
from typing import TYPE_CHECKING, Any, Dict, List, Optional, Tuple, Union

from taegis_sdk_python import GraphQLNoRowsInResultSetError
from taegis_sdk_python._consts import TaegisEnum
from taegis_sdk_python.services.escalation_policies.types import *
from taegis_sdk_python.utils import (
    build_output_string,
    parse_union_result,
    prepare_input,
)

if TYPE_CHECKING:  # pragma: no cover
    from taegis_sdk_python.services.escalation_policies import EscalationPoliciesService

log = logging.getLogger(__name__)


class TaegisSDKEscalationPoliciesQuery:
    """Taegis Escalation_policies Query operations."""

    def __init__(self, service: EscalationPoliciesService):
        self.service = service

    def escalation_policy(
        self, arguments: EscalationPolicyArguments
    ) -> EscalationPolicy:
        """Get a single escalation policy by id."""
        endpoint = "escalationPolicy"

        result = self.service.execute_query(
            endpoint=endpoint,
            variables={
                "arguments": prepare_input(arguments),
            },
            output=build_output_string(
                EscalationPolicy,
                exclude_deprecated_output=self.service.exclude_deprecated_output,
            ),
        )
        if result.get(endpoint) is not None:
            return EscalationPolicy.from_dict(result.get(endpoint))
        raise GraphQLNoRowsInResultSetError("for query escalationPolicy")

    def escalation_policies(
        self, arguments: EscalationPoliciesArguments
    ) -> EscalationPolicies:
        """Get a list of escalation policies."""
        endpoint = "escalationPolicies"

        result = self.service.execute_query(
            endpoint=endpoint,
            variables={
                "arguments": prepare_input(arguments),
            },
            output=build_output_string(
                EscalationPolicies,
                exclude_deprecated_output=self.service.exclude_deprecated_output,
            ),
        )
        if result.get(endpoint) is not None:
            return EscalationPolicies.from_dict(result.get(endpoint))
        raise GraphQLNoRowsInResultSetError("for query escalationPolicies")

    def walk_escalation_policy(
        self, arguments: WalkEscalationPolicyArguments
    ) -> EscalationPolicyStep:
        """Walk Escalation Policy gets the next valid contact to try in an escalation policy.
        If there are no more contacts to try, the escalationStep field will be null and no error will be returned..
        """
        endpoint = "walkEscalationPolicy"

        result = self.service.execute_query(
            endpoint=endpoint,
            variables={
                "arguments": prepare_input(arguments),
            },
            output=build_output_string(
                EscalationPolicyStep,
                exclude_deprecated_output=self.service.exclude_deprecated_output,
            ),
        )
        if result.get(endpoint) is not None:
            return EscalationPolicyStep.from_dict(result.get(endpoint))
        raise GraphQLNoRowsInResultSetError("for query walkEscalationPolicy")

    def contact_method_options(
        self, arguments: Optional[ContactMethodOptionsArguments] = None
    ) -> ContactMethods:
        """Contact Method Options returns a list of currently supported contact methods for the tenant.."""
        endpoint = "contactMethodOptions"

        result = self.service.execute_query(
            endpoint=endpoint,
            variables={
                "arguments": prepare_input(arguments),
            },
            output=build_output_string(
                ContactMethods,
                exclude_deprecated_output=self.service.exclude_deprecated_output,
            ),
        )
        if result.get(endpoint) is not None:
            return ContactMethods.from_dict(result.get(endpoint))
        raise GraphQLNoRowsInResultSetError("for query contactMethodOptions")
